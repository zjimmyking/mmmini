<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="../../../scripts/boot.js" type="text/javascript"></script>
    <script src="../res/cell/cell.js" type="text/javascript"></script>
</head>
<body>
    <!-- <div id="btns"></div> -->
    <div class="mini-toolbar">
        <a class="mini-button add" iconCls="icon-add" onclick="">增加</a>
        <a class="mini-button del" iconCls="icon-remove" onclick="">删除</a>
    </div>
    <div id="tabs1" class="mini-tabs" activeIndex="0" style="width:100%;height:800px;">
        <div id="tabTit" title="商品明细表">
            <div id="datagrid" class="mini-datagrid" style="width:100%;height:580px;" 
            url=""  idField="id" allowResize="true" >
        </div>
        </div>

    </div>
     
 
</body>
</html>
<script>
    // document.getElementById("time").innerHTML = new Date().getTime();
    $(function(){
      let cell = new Cell('#cell',{

      })
      $.ajax({
            url: "../data/form1.txt",
            success: function (text) {
                var data = mini.decode(text);
                cell.loadData(data);
                console.log(data.Title)
                // setTimeout(()=>{
                //     $('.mini-tab-text').html(data.Title)
                // },1500)
                
            }
        })

        $('body').on('click','.add',function(){
            var grid = mini.get("datagrid");
            // grid.load();
            var newRow = { name: "New Row" };
            grid.addRow(newRow, 0);


        })
        $('body').on('click','.del',function(){
            var grid = mini.get("datagrid");
            var rows = grid.getSelecteds();
            console.log(rows)
            if (rows.length > 0) {
            
                grid.removeRows(rows, true);                
            }

        })

        
    })
</script>